import{w as K,v as X,T as Y}from"./@vue.runtime-dom-99571815.js";import{u as S,i as H,a as Z,m as ee}from"./index-76673f94.js";import{Q as te,n as oe}from"./@element-plus.icons-vue-73c86597.js";import"./store-acb3382e.js";import{u as I}from"./index-ff1aedbf.js";import{B as G,h as se,q as ne}from"./lodash-es-74a5df03.js";import{j as y,q as j,d as L,X as b,o as p,c as w,a as n,b as c,K as k,F as V,V as z,as as J,ar as Q,y as ae,h as W,L as re,N as F,J as M,t as D,O as le,e as ce,a1 as ie,M as _e}from"./@vue.runtime-core-561bebe5.js";import{u as i,r as U,j as pe,m as ue}from"./@vue.reactivity-97074417.js";import{o as O,O as B}from"./@vue.shared-40d3234d.js";import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as de}from"./logo-5b4cc875.js";import{b as me}from"./element-plus-ca11a4ea.js";import"./axios-f6771985.js";import"./nprogress-5ff42f71.js";import"./chardet-cfd7d38a.js";import"./pinia-d82d1bdc.js";import"./vue-demi-71ba0ef2.js";import"./monaco-editor-f913c445.js";import"./vue-echarts-0ed26588.js";import"./resize-detector-a5205554.js";import"./echarts-eea5b079.js";import"./tslib-54e39b60.js";import"./zrender-ecf5ed03.js";import"./vue-router-c769f697.js";import"./@vueuse.core-c33523a6.js";import"./@vueuse.shared-b7ebfaaa.js";import"./mitt-b509fb6d.js";import"./mockjs-597bdf6e.js";import"./vue-052dfabe.js";import"./@popperjs.core-c75af06c.js";import"./@ctrl.tinycolor-f8748455.js";import"./dayjs-e0a79e34.js";import"./async-validator-8a4f889d.js";import"./memoize-one-297ddbcb.js";import"./escape-html-f47942fe.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui.dom-4390772d.js";import"./@floating-ui.core-1d013f45.js";import"./@floating-ui.utils-1e4a7d10.js";const q=d=>(J("data-v-9520da8a"),d=d(),Q(),d),fe={class:"app-process"},he={class:"app-process__op"},ve=q(()=>n("i",{class:"cl-iconfont cl-icon-back"},null,-1)),be=[ve],we=q(()=>n("i",{class:"cl-iconfont cl-icon-refresh"},null,-1)),ye=[we],ke=q(()=>n("i",{class:"cl-iconfont cl-icon-home"},null,-1)),$e=[ke],ge={class:"app-process__container"},xe=["data-index","onClick","onContextmenu"],Ce=y({name:"app-process"}),Me=y({...Ce,setup(d){const{refs:u,setRefs:v,route:a,router:r,mitt:$}=I(),{process:s}=S();function o(){$.emit("view.refresh")}function e(){if(!s.list.find(_=>_.active)){const _=G(s.list);r.push(_?_.fullPath:"/")}}function l(h){u.scroller.wrapRef.scrollTo({left:h,behavior:"smooth"})}function t(h){const _=u[`item-${h}`];_&&l(_.offsetLeft-(u.scroller.wrapRef.clientWidth+_.clientWidth)/2)}function f(h,_){t(_),r.push(h.fullPath)}function m(h){s.remove(h),e()}function g(h,_){H.ContextMenu.open(h,{hover:{target:"app-process__item"},list:[{label:"關閉當前",hidden:_.fullPath!==a.path,callback(x){m(s.list.findIndex(P=>P.fullPath==_.fullPath)),x(),e()}},{label:"關閉其他",callback(x){s.set(s.list.filter(P=>P.fullPath==_.fullPath)),x(),e()}},{label:"關閉所有",callback(x){s.clear(),x(),e()}}]})}return j(()=>a.path,function(h){t(s.list.findIndex(_=>_.fullPath===h)||0)}),L(()=>{u.scroller.wrapRef.addEventListener("wheel",function(h){h.preventDefault();const _=2,x=h.deltaY*_;l(u.scroller.wrapRef.scrollLeft+x)})}),(h,_)=>{const x=b("el-icon"),P=b("el-scrollbar");return p(),w("div",fe,[n("ul",he,[n("li",{class:"item",onClick:_[0]||(_[0]=(...C)=>i(r).back&&i(r).back(...C))},be),n("li",{class:"item",onClick:o},ye),n("li",{class:"item",onClick:_[1]||(_[1]=C=>i(r).push("/"))},$e)]),n("div",ge,[c(P,{ref:i(v)("scroller"),class:"app-process__scroller"},{default:k(()=>[(p(!0),w(V,null,z(i(s).list,(C,R)=>{var A;return p(),w("div",{key:R,ref_for:!0,ref:i(v)(`item-${R}`),class:O(["app-process__item",{active:C.active}]),"data-index":R,onClick:E=>f(C,Number(R)),onContextmenu:K(E=>g(E,C),["stop","prevent"])},[n("span",null,B(((A=C.meta)==null?void 0:A.label)||C.name||C.path),1),c(x,{onMousedown:K(E=>m(Number(R)),["stop"])},{default:k(()=>[c(i(te))]),_:2},1032,["onMousedown"])],42,xe)}),128))]),_:1},512)])])}}});const Se=N(Me,[["__scopeId","data-v-9520da8a"]]);function Be(d){return typeof d=="function"||Object.prototype.toString.call(d)==="[object Object]"&&!ae(d)}const Ie=y({name:"b-menu",setup(){const{router:d,route:u,browser:v}=I(),{menu:a,app:r}=S();function $(o){o!=u.path&&d.push(o),v.isMini&&r.fold(!0)}function s(){function o(e,l){return e.filter(t=>t.isShow).map(t=>{let f=null;const m=g=>c("div",{class:"wrap"},[c(b("cl-svg"),{name:g.icon},null),re(c("span",null,[g.name]),[[X,!r.isFold||l!=1]])]);return t.type==0?f=W(c(b("el-sub-menu"),null,null),{index:String(t.id),key:t.id,popperClass:"app-slider__menu"},{title(){return m(t)},default(){return o(t.children||[],l+1)}}):f=W(c(b("el-menu-item"),null,null),{index:t.path,key:t.id},{default(){return m(t)}}),f})}return o(a.list,1)}return()=>{let o;return c("div",{class:"app-slider__menu"},[c(b("el-menu"),{"default-active":u.path,"background-color":"transparent","collapse-transition":!1,collapse:v.isMini?!1:r.isFold,onSelect:$},Be(o=s())?o:{default:()=>[o]})])}}}),Ne={class:"app-slider"},Te={class:"app-slider__logo"},Pe=n("img",{src:de},null,-1),Re={key:0},Ve={class:"app-slider__container"},Fe=y({name:"app-slider"}),De=y({...Fe,setup(d){const{browser:u}=Z(),{app:v}=S();return(a,r)=>(p(),w("div",Ne,[n("div",Te,[Pe,!i(v).isFold||i(u).isMini?(p(),w("span",Re,B(i(v).info.name),1)):F("",!0)]),n("div",Ve,[c(i(Ie))])]))}});const Ee={class:"a-menu"},je={class:"a-menu__name"},Le=y({name:"a-menu"}),ze=y({...Le,setup(d){const{router:u,route:v}=I(),{menu:a}=S(),r=U("");function $(o){a.setMenu(o);const e=a.getPath(a.group[o]);u.push(e)}function s(){function o(e,l){switch(e.type){case 0:(e.children||[]).forEach(t=>{o(t,l)});break;case 1:v.path.includes(e.path)&&(r.value=String(l),a.setMenu(l));break}}a.group.forEach(o)}return j(()=>a.group.length,()=>{s()},{immediate:!0}),j(()=>v.path,()=>{s()}),(o,e)=>{const l=b("cl-svg"),t=b("el-menu-item"),f=b("el-menu");return p(),w("div",Ee,[c(f,{"default-active":r.value,mode:"horizontal","background-color":"transparent",onSelect:$},{default:k(()=>[(p(!0),w(V,null,z(i(a).group,(m,g)=>(p(),w(V,{key:g},[m.isShow?(p(),M(t,{key:0,index:`${g}`},{default:k(()=>[m.icon?(p(),M(l,{key:0,name:m.icon,size:18},null,8,["name"])):F("",!0),n("span",je,B(m.name),1)]),_:2},1032,["index"])):F("",!0)],64))),128))]),_:1},8,["default-active"])])}}});const Oe=N(ze,[["__scopeId","data-v-251a38e5"]]),qe={class:"route-nav"},Ae={key:0,class:"route-nav__title"},Ke=y({name:"route-nav"}),We=y({...Ke,setup(d){const{route:u,browser:v}=I(),{menu:a}=S(),r=D(()=>{function s(o){if(u.path==="/")return!1;if(o.path==u.path)return o;if(o.children){const e=o.children.map(s).find(Boolean);return e?[o,e]:!1}else return!1}return se(a.group.map(s).filter(Boolean))}),$=D(()=>{var s;return(s=G(r.value))==null?void 0:s.name});return(s,o)=>{const e=b("el-breadcrumb-item"),l=b("el-breadcrumb");return p(),w("div",qe,[i(v).isMini?(p(),w("p",Ae,B($.value),1)):(p(),M(l,{key:1,"separator-icon":i(oe)},{default:k(()=>[(p(!0),w(V,null,z(r.value,(t,f)=>(p(),M(e,{key:f},{default:k(()=>{var m;return[le(B(((m=t.meta)==null?void 0:m.label)||t.name),1)]}),_:2},1024))),128))]),_:1},8,["separator-icon"]))])}}});const Ge=N(We,[["__scopeId","data-v-f20adc2d"]]),T=d=>(J("data-v-2e98e129"),d=d(),Q(),d),Je={class:"app-topbar"},Qe=T(()=>n("i",{class:"cl-iconfont cl-icon-fold"},null,-1)),Ue=[Qe],Xe=T(()=>n("div",{class:"flex1"},null,-1)),Ye={key:0,class:"app-topbar__user"},He={class:"el-dropdown-link"},Ze={class:"name"},et=T(()=>n("i",{class:"cl-iconfont cl-icon-user"},null,-1)),tt=T(()=>n("span",null,"個人中心",-1)),ot=T(()=>n("i",{class:"cl-iconfont cl-icon-exit"},null,-1)),st=T(()=>n("span",null,"退出",-1)),nt=y({name:"app-topbar"}),at=y({...nt,setup(d){const{router:u,service:v,browser:a}=I(),{user:r,app:$}=S();async function s(e){switch(e){case"my":u.push("/my/info");break;case"exit":me.confirm("確定退出登錄嗎？","提示",{type:"warning"}).then(async()=>{await v.base.comm.logout(),r.logout()}).catch(()=>null);break}}const o=pe({list:[],async init(){const e=ne(ee.list.map(l=>l.toolbar).filter(Boolean),"order");this.list=await Promise.all(e.map(async l=>{if(l)return{...l,component:ue((await l.component).default)}}))}});return D(()=>o.list.filter(e=>a.isMini?(e==null?void 0:e.h5)??!0:(e==null?void 0:e.pc)??!0)),L(()=>{o.init()}),(e,l)=>{const t=b("cl-avatar"),f=b("el-dropdown-item"),m=b("el-dropdown-menu"),g=b("el-dropdown");return p(),w(V,null,[i($).info.menu.isGroup?(p(),M(Oe,{key:0})):F("",!0),n("div",Je,[n("div",{class:O(["app-topbar__collapse",{unfold:!i($).isFold}]),onClick:l[0]||(l[0]=h=>i($).fold())},Ue,2),c(Ge),Xe,i(r).info?(p(),w("div",Ye,[c(g,{trigger:"click","hide-on-click":"",onCommand:s},{dropdown:k(()=>[c(m,null,{default:k(()=>[c(f,{command:"my"},{default:k(()=>[et,tt]),_:1}),c(f,{command:"exit"},{default:k(()=>[ot,st]),_:1})]),_:1})]),default:k(()=>[n("span",He,[n("span",Ze,B(i(r).info.nickName),1),c(t,{size:32,src:i(r).info.headImg},null,8,["src"])])]),_:1})])):F("",!0)])],64)}}});const rt=N(at,[["__scopeId","data-v-2e98e129"]]),lt={class:"app-views"},ct=y({name:"app-views"}),it=y({...ct,setup(d){const{refs:u,setRefs:v,mitt:a}=I(),{process:r,app:$}=S(),s=U(1),o=D(()=>r.list.filter(t=>{var f;return(f=t.meta)==null?void 0:f.keepAlive}).map(t=>t.path.substring(1,t.path.length).replace(/\//g,"-")));function e(){s.value+=1}function l({el:t,top:f}){const m=u.scrollbar.wrapRef;t&&(f=m.querySelector(t).offsetTop),m.scrollTo({top:f,behavior:"smooth"})}return L(()=>{a.on("view.scrollTo",l),a.on("view.refresh",e)}),ce(()=>{a.off("view.scrollTo"),a.off("view.refresh")}),(t,f)=>{const m=b("el-scrollbar"),g=b("router-view");return p(),w("div",lt,[c(g,null,{default:k(({Component:h})=>[(p(),M(m,{ref:i(v)("scrollbar"),key:s.value},{default:k(()=>[c(Y,{name:i($).info.router.transition||"none"},{default:k(()=>[(p(),M(ie,{include:o.value},[(p(),M(_e(h)))],1032,["include"]))]),_:2},1032,["name"])]),_:2},1024))]),_:1})])}}});const _t=N(it,[["__scopeId","data-v-40a368ad"]]),pt={class:"app-layout__left"},ut={class:"app-layout__right"},dt=y({name:"app-layout"}),mt=y({...dt,setup(d){const{app:u}=S();return(v,a)=>(p(),w("div",{class:O(["app-layout",{collapse:i(u).isFold}])},[n("div",{class:"app-layout__mask",onClick:a[0]||(a[0]=r=>i(u).fold(!0))}),n("div",pt,[c(De)]),n("div",ut,[c(rt),c(Se),c(_t)])],2))}});const eo=N(mt,[["__scopeId","data-v-6dc55598"]]);export{eo as default};
