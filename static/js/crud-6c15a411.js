import{g as J,i as p}from"./index-7178fe38.js";import{_ as K}from"./form-btn.vue_vue_type_script_setup_true_lang-90739d40.js";import"./store-acb3382e.js";import{u as P}from"./index-819678c4.js";import{a as m,b as X}from"./element-plus-ca11a4ea.js";import{j as C,X as o,o as G,J as H,K as n,b as e,a as L,O as u}from"./@vue.runtime-core-561bebe5.js";import{j as k,u as d}from"./@vue.reactivity-97074417.js";import{O as _}from"./@vue.shared-40d3234d.js";import"./@vue.runtime-dom-99571815.js";import"./axios-f6771985.js";import"./nprogress-5ff42f71.js";import"./chardet-cfd7d38a.js";import"./pinia-d82d1bdc.js";import"./vue-demi-71ba0ef2.js";import"./monaco-editor-f913c445.js";import"./vue-echarts-0ed26588.js";import"./resize-detector-a5205554.js";import"./echarts-eea5b079.js";import"./tslib-54e39b60.js";import"./zrender-ecf5ed03.js";import"./lodash-es-74a5df03.js";import"./vue-router-c769f697.js";import"./@vueuse.core-c33523a6.js";import"./@vueuse.shared-b7ebfaaa.js";import"./mitt-b509fb6d.js";import"./mockjs-597bdf6e.js";import"./vue-052dfabe.js";import"./@element-plus.icons-vue-73c86597.js";import"./@popperjs.core-c75af06c.js";import"./@ctrl.tinycolor-f8748455.js";import"./dayjs-e0a79e34.js";import"./async-validator-8a4f889d.js";import"./memoize-one-297ddbcb.js";import"./escape-html-f47942fe.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui.dom-4390772d.js";import"./@floating-ui.core-1d013f45.js";import"./@floating-ui.utils-1e4a7d10.js";const Q={style:{padding:"0 10px"}},Y=C({name:"demo-crud"}),ze=C({...Y,setup(Z){const{service:S,refs:W,setRefs:T}=P(),{dict:c}=J(),D=k({status:[{label:"啟用",value:1},{label:"禁用",type:"danger",value:0}]}),h=k({wages:0}),N=p.useCrud({service:S.test,async onRefresh(t,{next:l}){const a=await l(t);Object.assign(h,a.subData)}},t=>{t.refresh({})}),s=p.useUpsert({items:[{type:"tabs",props:{type:"card",labels:[{label:"基礎",value:"base"},{label:"其他",value:"other"}]}},{label:"頭像",prop:"avatar",group:"base",component:{name:"cl-upload"}},{label:"賬號",group:"base",prop:"account",component:{name:"el-input"}},()=>{var t;return{label:"密碼",group:"base",prop:"password",hidden:((t=s.value)==null?void 0:t.mode)=="update",component:{name:"el-input",props:{type:"password"}}}},{prop:"user",group:"base",component:{name:"cl-form-card",props:{label:"用戶信息（多層級展示）"}},children:[{label:"姓名",prop:"name",required:!0,component:{name:"el-input"}},{label:"存款",prop:"wages",component:{name:"el-input-number"}}]},{label:"省市區",prop:"pca",group:"base",component:{name:"cl-distpicker"}},{label:"工作",prop:"occupation",group:"other",hook:{bind:"string"},component:{name:"el-tree-select",props:{data:c.get("occupation"),checkStrictly:!0}}},{label:"身份證照片",prop:"idCardPic",group:"other",component:{name:"cl-upload",props:{isSpace:!0,size:[200,300]}}}],plugins:[p.setFocus("account")],onInfo(t,{next:l,done:a}){a(t)},onSubmit(t,{next:l,close:a,done:g}){l(t)},onOpened(t){var l;((l=s.value)==null?void 0:l.mode)!="info"&&m.info("編輯中")},onClose(t,l){var a;if(((a=s.value)==null?void 0:a.mode)=="update"&&t=="close")return X.confirm("還沒填完，確定關閉不？","提示",{type:"warning"}).then(()=>{l(),m.info("好吧")}).catch(()=>{m.success("請繼續編輯")});l()}}),b=p.useTable({columns:[{type:"selection",width:60},{label:"展開",type:"expand",prop:"detail",width:60},{label:"頭像",prop:"avatar",width:100,component:{name:"cl-image",props:{size:40}}},{label:"姓名",prop:"name",minWidth:150},{label:"手機號",prop:"phone",minWidth:140},{label:"賬號",prop:"account",minWidth:140},{label:"存款(元)",prop:"wages",minWidth:120,sortable:"desc"},{label:"工作",prop:"occupation",dict:c.get("occupation"),dictColor:!0,minWidth:120,formatter(t){return String(t.occupation)}},{label:"狀態",orderNum:2,prop:"status",minWidth:100,component:{name:"cl-switch"}},{label:"出生年月",orderNum:1,minWidth:140,prop:"createTime",sortable:"custom"},{type:"op",width:320,buttons({scope:t}){return["info","edit","delete",{label:"自定義",onClick(){m.info(`他是：${t.row.name}`)}}]}}]});function B(){return["合計","",...W.columnCustom.summary(h)]}const O=p.useAdvSearch({items:[{label:"姓名",prop:"name",component:{name:"el-input",props:{clearable:!0}}},{label:"手機號",prop:"phone",component:{name:"el-input",props:{clearable:!0}}},{label:"工作",prop:"occupation",hook:{bind:"string"},component:{name:"el-select",options:c.get("occupation")}}]});return p.useSearch({items:[{label:"姓名",prop:"name",component:{name:"el-input",props:{clearable:!0}}}]}),(t,l)=>{const a=o("cl-refresh-btn"),g=o("cl-add-btn"),j=o("cl-multi-delete-btn"),w=o("cl-select"),v=o("cl-filter"),y=o("cl-flex1"),A=o("cl-import-btn"),E=o("cl-export-btn"),M=o("cl-column-custom"),U=o("cl-search-key"),V=o("cl-adv-btn"),f=o("cl-row"),i=o("el-descriptions-item"),z=o("el-descriptions"),I=o("cl-table"),R=o("cl-pagination"),$=o("cl-upsert"),q=o("cl-adv-search"),F=o("cl-crud");return G(),H(F,{ref_key:"Crud",ref:N},{default:n(()=>[e(f,null,{default:n(()=>{var r,x;return[e(a),e(g),e(j),e(K),e(v,{label:"狀態篩選"},{default:n(()=>[e(w,{options:D.status,prop:"status",width:120},null,8,["options"])]),_:1}),e(v,{label:"工作（字典）"},{default:n(()=>[e(w,{options:d(c).get("occupation"),prop:"occupation",width:120},null,8,["options"])]),_:1}),e(y),e(A,{template:"/用戶導入模版.xlsx"}),e(E,{columns:(r=d(b))==null?void 0:r.columns},null,8,["columns"]),e(M,{columns:(x=d(b))==null?void 0:x.columns,ref:d(T)("columnCustom")},null,8,["columns"]),e(U,{field:"name","field-list":[{label:"姓名",value:"name"},{label:"手機號",value:"phone"}],width:200}),e(V)]}),_:1}),e(f,null,{default:n(()=>[e(I,{ref_key:"Table",ref:b,"show-summary":"","summary-method":B},{"column-detail":n(({scope:r})=>[L("div",Q,[e(z,{border:"",column:3},{default:n(()=>[e(i,{label:"ID"},{default:n(()=>[u(_(r.row.id),1)]),_:2},1024),e(i,{label:"姓名"},{default:n(()=>[u(_(r.row.name),1)]),_:2},1024),e(i,{label:"存款"},{default:n(()=>[u(_(r.row.wages),1)]),_:2},1024),e(i,{label:"出生年月"},{default:n(()=>[u(_(r.row.createTime),1)]),_:2},1024)]),_:2},1024)])]),_:1},512)]),_:1}),e(f,null,{default:n(()=>[e(y),e(R)]),_:1}),e($,{ref_key:"Upsert",ref:s},null,512),e(q,{ref_key:"AdvSearch",ref:O},null,512)]),_:1},512)}}});export{ze as default};
